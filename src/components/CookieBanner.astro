---
// src/components/CookieBanner.astro
const { isEn = false } = Astro.props;

const message = isEn 
  ? "We use cookies to improve your experience on our website." 
  : "Kami menggunakan cookie untuk meningkatkan pengalaman Anda di situs kami.";
const acceptText = isEn ? "Accept" : "Setuju";
const policyText = isEn ? "Privacy Policy" : "Kebijakan Privasi";
const policyLink = isEn ? "/en/privacy" : "/id/privacy";
---

<div id="cookie-banner" class="fixed bottom-0 left-0 right-0 bg-slate-950 text-white p-4 z-100 transform translate-y-full transition-transform duration-500 shadow-2xl border-t border-emerald-500/20">
  <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
    <p class="text-sm md:text-base text-slate-200 text-center md:text-left">
      {message} 
      <a href={policyLink} class="text-emerald-400 font-semibold underline hover:text-emerald-300 ml-1">{policyText}</a>
    </p>
    <button 
      id="accept-cookie" 
      class="bg-emerald-600 hover:bg-emerald-700 text-white px-10 py-2.5 rounded-full font-black transition-all active:scale-95 whitespace-nowrap shadow-lg"
    >
      {acceptText}
    </button>
  </div>
</div>

<script is:inline>
  function initCookieBanner() {
    const banner = document.getElementById('cookie-banner');
    const btn = document.getElementById('accept-cookie');

    if (banner && btn && !localStorage.getItem('cookie-consent')) {
      setTimeout(() => {
        banner.classList.remove('translate-y-full');
      }, 1500);
      
      btn.addEventListener('click', () => {
        localStorage.setItem('cookie-consent', 'true');
        banner.classList.add('translate-y-full');
      });
    }
  }

  // Jalankan init
  initCookieBanner();
  // Support untuk Astro View Transitions
  document.addEventListener('astro:after-swap', initCookieBanner);
</script>